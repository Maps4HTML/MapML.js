<!DOCTYPE html>
<html lang="en">

<head>
  <title>geoJSON 2 MapML</title>
  <meta charset="UTF-8">
  <script type="module" src="mapml-viewer.js"></script>
  <!--Stores the expected mapml outputs-->
  <script src="geojson2mapmlJSON.js"></script>
</head>

<body>
    <!--geojson2mapml layer output goes here dynamically-->
    <mapml-viewer id="output" projection="OSMTILE" zoom="10" lon="-75.7" lat="45.4" controls>
    </mapml-viewer>

    <!-- The expected results for geojson2mapml go here-->
    <div id="expected">
      <layer- label="Point Geometry" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>Point Geometry</map-featurecaption><map-geometry><map-point><map-coordinates>-75.6916809 45.4186964</map-coordinates></map-point></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Point</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="Line Geometry" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>Line Geometry</map-featurecaption><map-geometry><map-linestring><map-coordinates>-75.6168365 45.471929 -75.6855011 45.458445 -75.7016373 45.4391764 -75.7030106 45.4259255 -75.7236099 45.4208652 -75.7565689 45.4117074 -75.7833481 45.384225 -75.8197403 45.3714435 -75.8516693 45.377714 </map-coordinates></map-linestring></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Line</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="Polygon Geometry" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>Polygon Geometry</map-featurecaption><map-geometry><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates><map-coordinates>-75.6596588 45.4211062 -75.6338958 45.4254436 -75.6277127 45.4066458 -75.6572542 45.4097792 -75.6596588 45.4211062 </map-coordinates></map-polygon></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Polygon</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="MultiPoint Geometry" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>MultiPoint Geometry</map-featurecaption><map-geometry><map-multipoint><map-coordinates>-75.7016373 45.4391764 -75.7236099 45.4208652 -75.7833481 45.384225 </map-coordinates></map-multipoint></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a multipoint</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="MultiLineString Geometry" checked><map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>MultiLineString Geometry</map-featurecaption><map-geometry><map-multilinestring><map-coordinates>-75.6168365 45.471929 -75.6855011 45.458445 -75.7016373 45.4391764 -75.7030106 45.4259255 </map-coordinates><map-coordinates>-75.7565689 45.4117074 -75.7833481 45.384225 -75.8197403 45.3714435 -75.8516693 45.377714 </map-coordinates></map-multilinestring></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a MultiLineString</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="MultiPolygon Geometry" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>MultiPolygon Geometry</map-featurecaption><map-geometry><map-multipolygon><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates></map-polygon><map-polygon><map-coordinates>-75.6744295 45.472892 -75.7053451 45.4439942 -75.7063756 45.4249616 -75.7489704 45.4177324 -75.7788555 45.4003785 -75.7943133 45.4321899 -75.6744295 45.472892 </map-coordinates></map-polygon></map-multipolygon></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a MultiPolygon</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="Geometry Collection" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>Geometry Collection</map-featurecaption><map-geometry><map-geometrycollection><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates></map-polygon><map-linestring><map-coordinates>-75.6168365 45.471929 -75.6855011 45.458445 -75.7016373 45.4391764 -75.7030106 45.4259255 -75.7236099 45.4208652 -75.7565689 45.4117074 -75.7833481 45.384225 -75.8197403 45.3714435 -75.8516693 45.377714 </map-coordinates></map-linestring><map-point><map-coordinates>-75.6916809 45.4186964</map-coordinates></map-point></map-geometrycollection></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Geometry Collection</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="Test MapML" checked><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates></map-polygon></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">id</th><td itemprop="id">24e21a60be4811d892e2080020a0f4c9</td></tr><tr><th scope="row">label_fr</th><td itemprop="label_fr">Québec</td></tr><tr><th scope="row">label_en</th><td itemprop="label_en">Québec</td></tr><tr><th scope="row">label_ab</th><td itemprop="label_ab">Québec</td></tr><tr><th scope="row">type_fr</th><td itemprop="type_fr">CITY-Ville</td></tr><tr><th scope="row">type_en</th><td itemprop="type_en">CITY-City</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-linestring><map-coordinates>-75.6168365 45.471929 -75.6855011 45.458445 -75.7016373 45.4391764 -75.7030106 45.4259255 -75.7236099 45.4208652 -75.7565689 45.4117074 -75.7833481 45.384225 -75.8197403 45.3714435 -75.8516693 45.377714 </map-coordinates></map-linestring></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Line</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-point><map-coordinates>-75.6916809 45.4186964</map-coordinates></map-point></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Point</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-multipoint><map-coordinates>-75.7016373 45.4391764 -75.7236099 45.4208652 -75.7833481 45.384225 </map-coordinates></map-multipoint></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a multipoint</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-multilinestring><map-coordinates>-75.6168365 45.471929 -75.6855011 45.458445 -75.7016373 45.4391764 -75.7030106 45.4259255 </map-coordinates><map-coordinates>-75.7565689 45.4117074 -75.7833481 45.384225 -75.8197403 45.3714435 -75.8516693 45.377714 </map-coordinates></map-multilinestring></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a MultiLineString</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-multipolygon><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates></map-polygon><map-polygon><map-coordinates>-75.6744295 45.472892 -75.7053451 45.4439942 -75.7063756 45.4249616 -75.7489704 45.4177324 -75.7788555 45.4003785 -75.7943133 45.4321899 -75.6744295 45.472892 </map-coordinates><map-coordinates>-75.6744295 45.472892 -75.7053451 45.4439942 -75.7063756 45.4249616 -75.7489704 45.4177324 -75.7788555 45.4003785 -75.7943133 45.4321899 -75.6744295 45.472892 </map-coordinates></map-polygon></map-multipolygon></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a MultiPolygon</td></tr></tbody></table></map-properties></map-feature><map-feature><map-featurecaption>Test MapML</map-featurecaption><map-geometry><map-polygon><map-coordinates>-75.5859375 45.465669 -75.6813812 45.4533876 -75.6961441 45.4239978 -75.7249832 45.4083331 -75.7792282 45.3772317 -75.753479 45.3294614 -75.5831909 45.3815724 -75.602417 45.4273712 -75.5673981 45.4639834 -75.5859375 45.465669 </map-coordinates><map-coordinates>-75.6467062 45.4215881 -75.6889363 45.4049585 -75.6693647 45.3767494 -75.627064 45.3924229 -75.6467062 45.4215881 </map-coordinates></map-polygon></map-geometry><map-properties><table><thead><tr><th role="columnheader" scope="col">Property name</th><th role="columnheader" scope="col">Property value</th></tr></thead><tbody><tr><th scope="row">prop0</th><td itemprop="prop0">This is a Polygon with holes</td></tr></tbody></table></map-properties></map-feature></layer->
      <layer- label="Point" checked><map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>This is a Point</map-featurecaption><map-geometry><map-point><map-coordinates>-75.6916809 45.4186964</map-coordinates></map-point></map-geometry><map-properties><h1>String Properties test</h1></map-properties></map-feature></layer->
      <layer- label="Point 1" checked><map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta><map-meta name="projection" content="OSMTILE"></map-meta><map-meta name="cs" content="gcrs"></map-meta><map-feature><map-featurecaption>caption test</map-featurecaption><map-geometry><map-point><map-coordinates>-75.6916809 45.4186964</map-coordinates></map-point></map-geometry><map-properties><h1>This is a Point - with a featurecaption function</h1></map-properties></map-feature></layer->
    </div>

      <script>
          // --------------------------------------------------------------------------------- //
        window.onload = function() {
          let mapml = document.getElementById('output'); 

          mapml.geojson2mapml(point);
          mapml.geojson2mapml(line);
          mapml.geojson2mapml(polygon);
          mapml.geojson2mapml(multipoint);
          mapml.geojson2mapml(multilinestring);
          mapml.geojson2mapml(multipolygon);
          mapml.geojson2mapml(geometrycollection);
          mapml.geojson2mapml(featurecollection);
          mapml.geojson2mapml(bbox_label_properties_and_caption_string, {label: "Point", caption: "prop0", properties: "<h1>String Properties test</h1>"})
          
          let cap = function c(j) {
            return "caption test";
          }
          let prop = function f(p) {
            let parser = new DOMParser();
            return parser.parseFromString("<h1>" + p.properties.prop0 + " - with a featurecaption function</h1>", "text/html").body.firstChild;
          }
          mapml.geojson2mapml(bbox_label_properties_and_caption_function, {label: "Point 1", caption: cap, properties: prop})
        };

    </script>
</body>
</html>